/* Grid Layout Polyfill - v1.7.0 - 2013-04-04 - Polyfill for IE10 grid layout -ms-grid.
* https://github.com/codler/Grid-Layout-Polyfill
* Copyright (c) 2013 Han Lin Yap http://yap.nu; http://creativecommons.org/licenses/by-sa/3.0/ */
(function(){var e;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());function cleanCss(a){a=a.replace(/\/\*((?:[^\*]|\*[^\/])*)\*\//g,"");a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");a=a.replace(/\@import[^;]*;/g,"");return a}function cssTextToObj(h){h=cleanCss(h);var c=h.split(/({[^{}]*})/);if(c[c.length-1].indexOf("}")==-1){c.pop()}var d=[];var a=false;var j;var f=0;var g;var e=0;while(e<c.length){if(e%2===0){var b=$.trim(c[e]);if(a){if(b.indexOf("}")!=-1){b=b.substr(1);c[e]=b;g=c.splice(f,e-f);g.shift();g.unshift(j[1]);d[d.length-1].attributes=cssTextToObj(g.join(""));a=false;e=f;continue}}else{if(b.indexOf("{")!=-1){j=b.split("{");b=$.trim(j[0]);a=true;f=e}if(b!==""){d.push({selector:b})}}}else{if(!a){d[d.length-1].attributes=cssTextAttributeToObj(c[e].substr(1,c[e].length-2))}}e++}return d}function cssTextAttributeToObj(c){c=cleanCss(c||"");var b;c=c.replace(/url\(([^)]+)\)/g,function(d){return d.replace(/;/g,"[cssFinalize]")});b=c.split(/(:[^;]*;?)/);b.pop();var a={};$.map(b,function(e,d){if(d%2==1){a[$.trim(b[d-1])]=$.trim(e.substr(1).replace(";","").replace(/url\(([^)]+)\)/g,function(f){return f.replace(/\[cssFinalize\]/g,";")}))}});return a}(function(b){b.support.gridLayout=document.createElement("div").style.msGridRowAlign==="";var a="function"!==typeof Array.prototype.reduce;if(b.support.gridLayout||a){b.fn.gridLayout=function(){return this};return}jQuery(function(k){k.fn.gridLayout=function(z){return this.each(function(){var A=this;if(z=="refresh"){var B=false;k.each(j,function(C,D){k(D.selector).each(function(){if(A==this){w(A,D);B=true;return false}});if(B){return false}})}else{if(typeof z==="object"){if(z.resize){k(A).on("gridlayoutresize",function(){z.resize.call(A)})}}}})};function w(A,B){f(B.tracks);d(k(B.selector).outerWidth(),B.tracks);k(B.selector).children().css({"box-sizing":"border-box",position:"absolute",top:0,left:0,width:B.tracks[0][0].x,height:B.tracks[0][0].y}).each(function(F,G){var C=k(this);var K=o(C);K.sort(i);console.log(K);var E=v(t,K.pop());var J=cssTextAttributeToObj(C.data("old-style")||C.attr("style"));if(J["-ms-grid-row"]||E["-ms-grid-column"]||E["-ms-grid-column-span"]||E["-ms-grid-row-span"]){E=k.extend(true,E,J)}if(!E){return true}var N=E["-ms-grid-row"]||1;var D=E["-ms-grid-column"]||1;var L=E["-ms-grid-column-span"]||1;var H=E["-ms-grid-row-span"]||1;var M=q(B.tracks,N,D,H,L);var I=q(B.tracks,1,1,N-1,D-1);console.log(N,D,L,H);console.log(M);console.log(I);k(this).css({width:M.x,})});var z=x(k(B.selector).outerHeight(),B.tracks);k(B.selector).css({height:z});k(B.selector).children().each(function(F,G){var C=k(this);var K=o(C);K.sort(i);console.log(K);var E=v(t,K.pop());var J=cssTextAttributeToObj(C.data("old-style")||C.attr("style"));if(J["-ms-grid-row"]||E["-ms-grid-column"]||E["-ms-grid-column-span"]||E["-ms-grid-row-span"]){E=k.extend(true,E,J)}if(!E){return true}var N=E["-ms-grid-row"]||1;var D=E["-ms-grid-column"]||1;var L=E["-ms-grid-column-span"]||1;var H=E["-ms-grid-row-span"]||1;var M=q(B.tracks,N,D,H,L);var I=q(B.tracks,1,1,N-1,D-1);console.log(N,D,L,H);console.log(M);console.log(I);k(this).css({top:I.y,left:I.x,width:M.x,height:M.y})})}function f(z){for(var A=0;A<z.length;A++){for(var B=0;B<z[A].length;B++){if(z[A][B].frX){z[A][B].x=z[A][B].frX;delete z[A][B].frX}if(z[A][B].frY){z[A][B].y=z[A][B].frY;delete z[A][B].frY}}}}var r=/(^|\s)(?:\w+)/g;var u=/\.[\w\d_-]+/g;var y=/#[\w\d_-]+/g;var l=function(z){var B=z.match(r);var D=B?B.length:0;B=z.match(u);var C=B?B.length:0;B=z.match(y);var A=B?B.length:0;return D+10*C+100*A};var i=function(A,z){A=l(A);z=l(z);if(A<z){return -1}else{if(A>z){return 1}else{return 0}}};var m=function(z){return z.reduce(function(B,A){return parseFloat(B)+parseFloat(A)},0)};console.clear();var n=k("style").map(function(){return k(this).html()}).get().join("");var t=cssTextToObj(n);console.log(t);var j=c(t);console.log(j);k.expr[":"]["has-style"]=k.expr.createPseudo(function(z){return function(D){var B=cssTextAttributeToObj(k(D).attr("style"));var A=cssTextAttributeToObj(z);var C=false;k.each(B,function(E,F){k.each(A,function(H,G){if(E==H&&F==G){C=true;return false}});if(C){return false}});return C}});k('[style]:has-style("display:-ms-grid"), [data-ms-grid]').each(function(){var z=cssTextAttributeToObj(k(this).attr("style"));if(!z.display){z.display="-ms-grid"}j.push({selector:this,attributes:z,tracks:g(z)})});function c(A){var z=[];k.each(A,function(B,C){if(C.attributes){if(C.attributes.display=="-ms-grid"){z.push({selector:C.selector,attributes:C.attributes,tracks:g(C.attributes)})}}});return z}function g(A){var C=A["-ms-grid-columns"]||"auto";var B=A["-ms-grid-rows"]||"auto";C=C.toLowerCase().split(" ");B=B.toLowerCase().split(" ");var z=[];k.each(B,function(D,E){z[D]=[];k.each(C,function(G,F){z[D][G]={x:F,y:E}})});return z}k.each(j,function(B,C){var z=q(C.tracks,1,1,C.tracks.length,C.tracks[0].length);k(C.selector).each(function(){if(!k(this).data("old-style")){k(this).data("old-style",k(this).attr("style"))}});k(C.selector).css({position:"relative","box-sizing":"border-box",width:(C.attributes.display=="-ms-grid")?"100%":z.x,height:z.y});d(k(C.selector).outerWidth(),C.tracks);console.log(k(C.selector).outerWidth());console.log(k(C.selector).outerHeight());console.log(C.tracks);k(C.selector).children().each(function(){if(!k(this).data("old-style")){k(this).data("old-style",k(this).attr("style"))}});k(C.selector).children().css({"box-sizing":"border-box",position:"absolute",top:0,left:0,width:C.tracks[0][0].x,height:C.tracks[0][0].y}).each(function(H,J){var F=k(this);var G=o(F);G.sort(i);console.log(G);var E=v(t,G.pop());var D=cssTextAttributeToObj(F.data("old-style")||F.attr("style"));if(D["-ms-grid-row"]||E["-ms-grid-column"]){E=k.extend(true,E,D)}if(!E){return true}var K=E["-ms-grid-row"]||1;var I=E["-ms-grid-column"]||1;if(C.tracks[K-1][I-1].item){C.tracks[K-1][I-1].item.add(F)}else{C.tracks[K-1][I-1].item=F}});k(C.selector).children().each(function(G,H){var D=k(this);var L=o(D);L.sort(i);console.log(L);var F=v(t,L.pop());var K=cssTextAttributeToObj(D.data("old-style")||D.attr("style"));if(K["-ms-grid-row"]||F["-ms-grid-column"]||F["-ms-grid-column-span"]||F["-ms-grid-row-span"]){F=k.extend(true,F,K)}if(!F){return true}var O=F["-ms-grid-row"]||1;var E=F["-ms-grid-column"]||1;var M=F["-ms-grid-column-span"]||1;var I=F["-ms-grid-row-span"]||1;var N=q(C.tracks,O,E,I,M);var J=q(C.tracks,1,1,O-1,E-1);console.log(O,E,M,I);console.log(N);console.log(J);k(this).css({width:N.x,})});var A=s(k(C.selector).outerHeight(),C.tracks);k(C.selector).css({height:A});k(C.selector).children().each(function(G,H){var D=k(this);var L=o(D);L.sort(i);console.log(L);var F=v(t,L.pop());var K=cssTextAttributeToObj(D.data("old-style")||D.attr("style"));if(K["-ms-grid-row"]||F["-ms-grid-column"]||F["-ms-grid-column-span"]||F["-ms-grid-row-span"]){F=k.extend(true,F,K)}if(!F){return true}var O=F["-ms-grid-row"]||1;var E=F["-ms-grid-column"]||1;var M=F["-ms-grid-column-span"]||1;var I=F["-ms-grid-row-span"]||1;var N=q(C.tracks,O,E,I,M);var J=q(C.tracks,1,1,O-1,E-1);console.log(O,E,M,I);console.log(N);console.log(J);k(this).css({top:J.y,left:J.x,width:N.x,height:N.y})})});var e;function h(){k.each(j,function(z,A){k(A.selector).gridLayout("refresh").trigger("gridlayoutresize")})}function p(){return k(document).height()>k(window).height()}k(window).on("resize",function(A,B){var z=this;clearTimeout(e);e=setTimeout(function(){var C=false;if(p()){C=true}h();if(!p()&&C){k(z).trigger("resize")}},100)});function d(B,A){for(var D=0;D<A.length;D++){var E=[];var C=B;for(var F=0;F<A[D].length;F++){if(A[D][F].x.indexOf("fr")!==-1){E.push(parseFloat(A[D][F].x))}else{if(A[D][F].x.indexOf("px")!==-1){C-=parseFloat(A[D][F].x)}}}var z=m(E);for(var F=0;F<A[D].length;F++){if(A[D][F].x.indexOf("fr")!==-1){A[D][F].frX=A[D][F].x;A[D][F].x=""+C/(z/parseFloat(A[D][F].x))}}}}function x(A,C){for(var F=0;F<C[0].length;F++){var E=[];var z=A;for(var D=0;D<C.length;D++){if(C[D][F].y.indexOf("fr")!==-1){E.push(parseFloat(C[D][F].y))}else{if(C[D][F].y.indexOf("px")!==-1){z-=parseFloat(C[D][F].y)}}}var B=m(E);for(var D=0;D<C.length;D++){if(C[D][F].y.indexOf("fr")!==-1){C[D][F].frY=C[D][F].y;C[D][F].y=""+z/(B/parseFloat(C[D][F].y))}}}}function s(N,G){var D=[];var O=[];for(var A=0;A<G.length;A++){var L=[0];var E=[0];for(var J=0;J<G[0].length;J++){var z=0;if(G[A][J].y.indexOf("fr")!==-1){var M=parseFloat(G[A][J].y);if(G[A][J].item){G[A][J].item.height("auto");z=Math.max.apply(Math,G[A][J].item.map(function(){return k(this).outerHeight(true)}).get())}L.push(z/M)}else{if(G[A][J].y.indexOf("auto")!==-1){if(G[A][J].item){G[A][J].item.height("auto");z=Math.max.apply(Math,G[A][J].item.map(function(){return k(this).outerHeight(true)}).get())}E.push(z)}}}D[A]=Math.max.apply(Math,L);O[A]=Math.max.apply(Math,E)}var C=Math.max.apply(Math,D);var B=[];var I=N;var K=0;var F=0;for(var A=0;A<G.length;A++){if(G[A][0].y.indexOf("fr")!==-1){var M=parseFloat(G[A][0].y);B.push(M);K+=C*M}else{if(G[A][0].y.indexOf("px")!==-1){I-=parseFloat(G[A][0].y)}else{if(G[A][0].y.indexOf("auto")!==-1){F+=O[A]}}}}I+=K;var H=m(B);for(var J=0;J<G[0].length;J++){for(var A=0;A<G.length;A++){if(G[A][J].y.indexOf("fr")!==-1){G[A][J].frY=G[A][J].y;G[A][J].y=""+I/(H/parseFloat(G[A][J].y))}else{if(G[A][0].y.indexOf("auto")!==-1){G[A][J].frY=G[A][J].y;G[A][J].y=""+O[A]}}}}return N+K+F}function v(B,z){var A;k.each(B,function(C,D){if(D.selector==z){A=D.attributes;return false}});return k.extend(true,{},A)}function q(z,F,C,B,A){F--;C--;var E={x:0,y:0};for(var D=0;D<B;D++){if(/^\d+(\.\d+)?(px)?$/.test(z[F+D][C].y)){E.y+=parseFloat(z[F+D][C].y)}}for(var G=0;G<A;G++){if(/^\d+(\.\d+)?(px)?$/.test(z[F][C+G].x)){E.x+=parseFloat(z[F][C+G].x)}}return E}function o(C){var B=[];for(var z=0;z<document.styleSheets.length;z++){var E=document.styleSheets[z].cssRules;for(var A=0;A<E.length;A++){try{if(C.is(E[A].selectorText)){B.push(E[A].selectorText)}}catch(D){}}}return B}})})(jQuery);