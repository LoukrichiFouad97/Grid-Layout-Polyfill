/* CSS3 Finalize - v1.4 - 2013-03-28 - Grid Layout Polyfill
* https://github.com/codler/Grid-Layout-Polyfill
* Copyright (c) 2013 Han Lin Yap http://yap.nu; http://creativecommons.org/licenses/by-sa/3.0/ */
(function(){var e;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());if(!Array.prototype.reduce){Array.prototype.reduce=function(b){if(this==null){throw new TypeError("can't convert "+this+" to object")}var f=Object(this);var a=f.length>>>0;if(typeof b!="function"){throw new TypeError(b+" is not a function")}if(a===0&&arguments.length<2){throw new TypeError("reduce of empty array with no initial value")}var e=0;var d;if(arguments.length>1){d=arguments[1]}else{var c=false;while((!c)&&(e<a)){c=e in f;if(c){d=f[e]}e++}if(!c){throw new TypeError("reduce of empty array with no initial value")}}while(e<a){if(e in f){d=b.call(undefined,d,f[e],e,f)}e++}return d}}function cleanCss(a){a=a.replace(/\/\*((?:[^\*]|\*[^\/])*)\*\//g,"");a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");a=a.replace(/\@import[^;]*;/g,"");return a}function cssTextToObj(h){h=cleanCss(h);var c=h.split(/({[^{}]*})/);if(c[c.length-1].indexOf("}")==-1){c.pop()}var d=[];var a=false;var j;var f=0;var g;var e=0;while(e<c.length){if(e%2===0){var b=$.trim(c[e]);if(a){if(b.indexOf("}")!=-1){b=b.substr(1);c[e]=b;g=c.splice(f,e-f);g.shift();g.unshift(j[1]);d[d.length-1].attributes=cssTextToObj(g.join(""));a=false;e=f;continue}}else{if(b.indexOf("{")!=-1){j=b.split("{");b=$.trim(j[0]);a=true;f=e}if(b!==""){d.push({selector:b})}}}else{if(!a){d[d.length-1].attributes=cssTextAttributeToObj(c[e].substr(1,c[e].length-2))}}e++}return d}function cssTextAttributeToObj(c){c=cleanCss(c||"");var b;c=c.replace(/url\(([^)]+)\)/g,function(d){return d.replace(/;/g,"[cssFinalize]")});b=c.split(/(:[^;]*;?)/);b.pop();var a={};$.map(b,function(e,d){if(d%2==1){a[$.trim(b[d-1])]=$.trim(e.substr(1).replace(";","").replace(/url\(([^)]+)\)/g,function(f){return f.replace(/\[cssFinalize\]/g,";")}))}});return a}jQuery(function(g){if(document.createElement("div").style.msGridRowAlign===""){return false}g.fn.gridLayout=function(t){this.each(function(){var u=this;if(t=="refresh"){var v=false;g.each(f,function(w,x){g(x.selector).each(function(){if(u==this){p(u,x);v=true;return false}});if(v){return false}})}});return this};function p(u,v){c(v.tracks);b(g(v.selector).outerWidth(),v.tracks);g(v.selector).children().css({"box-sizing":"border-box",position:"absolute",top:0,left:0,width:v.tracks[0][0].x,height:v.tracks[0][0].y}).each(function(z,A){var w=g(this);var E=j(w);E.sort(e);console.log(E);var y=q(n,E.pop());var D=cssTextAttributeToObj(w.data("old-style")||w.attr("style"));if(D["-ms-grid-row"]||y["-ms-grid-column"]||y["-ms-grid-column-span"]||y["-ms-grid-row-span"]){y=g.extend(true,y,D)}if(!y){return true}var H=y["-ms-grid-row"]||1;var x=y["-ms-grid-column"]||1;var F=y["-ms-grid-column-span"]||1;var B=y["-ms-grid-row-span"]||1;var G=k(v.tracks,H,x,B,F);var C=k(v.tracks,1,1,H-1,x-1);console.log(H,x,F,B);console.log(G);console.log(C);g(this).css({width:G.x,})});var t=r(g(v.selector).outerHeight(),v.tracks);g(v.selector).css({height:t});g(v.selector).children().each(function(z,A){var w=g(this);var E=j(w);E.sort(e);console.log(E);var y=q(n,E.pop());var D=cssTextAttributeToObj(w.data("old-style")||w.attr("style"));if(D["-ms-grid-row"]||y["-ms-grid-column"]||y["-ms-grid-column-span"]||y["-ms-grid-row-span"]){y=g.extend(true,y,D)}if(!y){return true}var H=y["-ms-grid-row"]||1;var x=y["-ms-grid-column"]||1;var F=y["-ms-grid-column-span"]||1;var B=y["-ms-grid-row-span"]||1;var G=k(v.tracks,H,x,B,F);var C=k(v.tracks,1,1,H-1,x-1);console.log(H,x,F,B);console.log(G);console.log(C);g(this).css({top:C.y,left:C.x,width:G.x,height:G.y})})}function c(t){for(var u=0;u<t.length;u++){for(var v=0;v<t[u].length;v++){if(t[u][v].frX){t[u][v].x=t[u][v].frX;delete t[u][v].frX}if(t[u][v].frY){t[u][v].y=t[u][v].frY;delete t[u][v].frY}}}}var l=/(^|\s)(?:\w+)/g;var o=/\.[\w\d_-]+/g;var s=/#[\w\d_-]+/g;var h=function(t){var v=t.match(l);var x=v?v.length:0;v=t.match(o);var w=v?v.length:0;v=t.match(s);var u=v?v.length:0;return x+10*w+100*u};var e=function(u,t){u=h(u);t=h(t);if(u<t){return -1}else{if(u>t){return 1}else{return 0}}};console.clear();var i=g("style").map(function(){return g(this).html()}).get().join("");var n=cssTextToObj(i);console.log(n);var f=a(n);console.log(f);g.expr[":"]["has-style"]=g.expr.createPseudo(function(t){return function(x){var v=cssTextAttributeToObj(g(x).attr("style"));var u=cssTextAttributeToObj(t);var w=false;g.each(v,function(y,z){g.each(u,function(B,A){if(y==B&&z==A){w=true;return false}});if(w){return false}});return w}});g('[style]:has-style("display:-ms-grid"), [data-ms-grid]').each(function(){var t=cssTextAttributeToObj(g(this).attr("style"));if(!t.display){t.display="-ms-grid"}f.push({selector:this,attributes:t,tracks:d(t)})});function a(u){var t=[];g.each(u,function(v,w){if(w.attributes){if(w.attributes.display=="-ms-grid"){t.push({selector:w.selector,attributes:w.attributes,tracks:d(w.attributes)})}}});return t}function d(u){var w=u["-ms-grid-columns"].split(" "),v=u["-ms-grid-rows"].split(" ");var t=[];g.each(v,function(y,z){t[y]=[];g.each(w,function(A,x){t[y][A]={x:x,y:z}})});return t}g.each(f,function(v,w){var t=k(w.tracks,1,1,w.tracks.length,w.tracks[0].length);g(w.selector).each(function(){if(!g(this).data("old-style")){g(this).data("old-style",g(this).attr("style"))}});g(w.selector).css({position:"relative","box-sizing":"border-box",width:(w.attributes.display=="-ms-grid")?"100%":t.x,height:t.y});b(g(w.selector).outerWidth(),w.tracks);console.log(g(w.selector).outerWidth());console.log(g(w.selector).outerHeight());console.log(w.tracks);g(w.selector).children().each(function(){if(!g(this).data("old-style")){g(this).data("old-style",g(this).attr("style"))}});g(w.selector).children().css({"box-sizing":"border-box",position:"absolute",top:0,left:0,width:w.tracks[0][0].x,height:w.tracks[0][0].y}).each(function(B,D){var z=g(this);var A=j(z);A.sort(e);console.log(A);var y=q(n,A.pop());var x=cssTextAttributeToObj(z.data("old-style")||z.attr("style"));if(x["-ms-grid-row"]||y["-ms-grid-column"]){y=g.extend(true,y,x)}if(!y){return true}var E=y["-ms-grid-row"]||1;var C=y["-ms-grid-column"]||1;w.tracks[E-1][C-1].item=z});g(w.selector).children().css({"box-sizing":"border-box",position:"absolute",top:0,left:0,width:w.tracks[0][0].x,height:w.tracks[0][0].y}).each(function(A,B){var x=g(this);var F=j(x);F.sort(e);console.log(F);var z=q(n,F.pop());var E=cssTextAttributeToObj(x.data("old-style")||x.attr("style"));if(E["-ms-grid-row"]||z["-ms-grid-column"]||z["-ms-grid-column-span"]||z["-ms-grid-row-span"]){z=g.extend(true,z,E)}if(!z){return true}var I=z["-ms-grid-row"]||1;var y=z["-ms-grid-column"]||1;var G=z["-ms-grid-column-span"]||1;var C=z["-ms-grid-row-span"]||1;var H=k(w.tracks,I,y,C,G);var D=k(w.tracks,1,1,I-1,y-1);console.log(I,y,G,C);console.log(H);console.log(D);g(this).css({width:H.x,})});var u=m(g(w.selector).outerHeight(),w.tracks);g(w.selector).css({height:u});g(w.selector).children().each(function(A,B){var x=g(this);var F=j(x);F.sort(e);console.log(F);var z=q(n,F.pop());var E=cssTextAttributeToObj(x.data("old-style")||x.attr("style"));if(E["-ms-grid-row"]||z["-ms-grid-column"]||z["-ms-grid-column-span"]||z["-ms-grid-row-span"]){z=g.extend(true,z,E)}if(!z){return true}var I=z["-ms-grid-row"]||1;var y=z["-ms-grid-column"]||1;var G=z["-ms-grid-column-span"]||1;var C=z["-ms-grid-row-span"]||1;var H=k(w.tracks,I,y,C,G);var D=k(w.tracks,1,1,I-1,y-1);console.log(I,y,G,C);console.log(H);console.log(D);g(this).css({top:D.y,left:D.x,width:H.x,height:H.y})})});g(window).on("resize",function(){g.each(f,function(t,u){g(u.selector).gridLayout("refresh")})});function b(v,u){for(var x=0;x<u.length;x++){var y=[];var w=v;for(var z=0;z<u[x].length;z++){if(u[x][z].x.indexOf("fr")!==-1){y.push(parseFloat(u[x][z].x))}else{if(u[x][z].x.indexOf("px")!==-1){w-=parseFloat(u[x][z].x)}}}var t=y.reduce(function(B,A){return parseInt(B,10)+parseInt(A,10)},0);for(var z=0;z<u[x].length;z++){if(u[x][z].x.indexOf("fr")!==-1){u[x][z].frX=u[x][z].x;u[x][z].x=""+w/(t/parseFloat(u[x][z].x))}}}}function r(u,w){for(var z=0;z<w[0].length;z++){var y=[];var t=u;for(var x=0;x<w.length;x++){if(w[x][z].y.indexOf("fr")!==-1){y.push(parseFloat(w[x][z].y))}else{if(w[x][z].y.indexOf("px")!==-1){t-=parseFloat(w[x][z].y)}}}var v=y.reduce(function(B,A){return parseInt(B,10)+parseInt(A,10)},0);for(var x=0;x<w.length;x++){if(w[x][z].y.indexOf("fr")!==-1){w[x][z].frY=w[x][z].y;w[x][z].y=""+t/(v/parseFloat(w[x][z].y))}}}}function m(B,x){var w=B;var v=false;for(var z=0;z<x[0].length;z++){var u=[];var A=B;for(var t=0;t<x.length;t++){if(x[t][z].y.indexOf("fr")!==-1){u.push(parseFloat(x[t][z].y));if(x[t][z].item){x[t][z].item.height("auto");A+=x[t][z].item.outerHeight(true);if(!v){w+=x[t][z].item.outerHeight(true);v=true}}}else{if(x[t][z].y.indexOf("px")!==-1){console.log(x[t][z].y);A-=parseFloat(x[t][z].y)}}}var y=u.reduce(function(D,C){return parseInt(D,10)+parseInt(C,10)},0);for(var t=0;t<x.length;t++){if(x[t][z].y.indexOf("fr")!==-1){console.log(A,y,parseFloat(x[t][z].y));x[t][z].frY=x[t][z].y;x[t][z].y=""+A/(y/parseFloat(x[t][z].y))}}}return w}function q(v,t){var u;g.each(v,function(w,x){if(x.selector==t){u=x.attributes;return false}});return g.extend(true,{},u)}function k(t,z,w,v,u){z--;w--;var y={x:0,y:0};for(var x=0;x<v;x++){if(t[z+x][w].y.indexOf("fr")===-1){y.y+=parseFloat(t[z+x][w].y)}}for(var A=0;A<u;A++){if(t[z][w+A].x.indexOf("fr")===-1){y.x+=parseFloat(t[z][w+A].x)}}return y}function j(w){var v=[];for(var t=0;t<document.styleSheets.length;t++){var z=document.styleSheets[t].cssRules;for(var u=0;u<z.length;u++){try{if(w.is(z[u].selectorText)){v.push(z[u].selectorText)}}catch(y){}}}return v}});